<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>HIT动漫组会抽签程序</title>
        
        <link rel="stylesheet" type="text/css" href="mdui/css/mdui.min.css" />
        <script src="mdui/js/mdui.min.js"></script>
        <script src="cu.js"></script>
        <style>
        #plane{
            padding: 3% 0% 0% 0%;
        }
        #bbc{
            font-weight: 300;
            font-size: 1000%;
        }
        #randomnum{
            padding-left: 15%;
        }
        
        #updatebutton{
            color: azure;
            
        }
        #surplus,#all{
            font-weight: 200;
            font-size: 600%;
        }
        </style>
        
    </head>    
    <body>
        <div class="mdui-container" id="plane"  style="padding:5%"> 
            <div class="mdui-row mdui-shadow-10" style="padding:5%">
                <div class="mdui-col-sm-6 ">
                    <div id="randomnum">
                        <h2>当前抽签序号</h2>
                        <p id ="bbc">00</p>
                        <button class="mdui-btn mdui-ripple mdui-ripple-white mdui-color-blue mdui-text-color-white-text">更新/进行抽签</button>
                    </div>
                </div>
                <div class="mdui-col-sm-6 ">
                    <div class="mdui-row">
                        <div class="mdui-col-sm-6 ">
                            <h2>抽签剩余数量</h2>
                            <p id ="surplus">00</p>
                        </div>
                        <div class="mdui-col-sm-6 ">
                            <h2>抽签总数量</h2>
                            <p id ="all">00</p>
                        </div>   
                    </div>
                    <h2>提示：</h2>
                    <p>每个单位代表仅有一次抽签资格</p>
                   
                </div>
            </div>
            <br>
            <center>[HIT动漫组会抽签工具] 开发由 HIT动漫程序技术部 AcgBag社团提供!
            </center>
        </div>
        <script>
            /*
            var demo = new CountUp("surplus", 0, 94, 0, 1);
            demo.start();
            */
            var all_num ;//抽签总数量
            all_num = prompt("请输入参与抽签人数");
            all_num = Number(all_num);
            
            delete demo;
            //生成排号数组
            all_arr = new Array(all_num);
            for(var i = 0;i<all_num;i++){
                all_arr[i] = i+1;
            }
            var arr = all_arr;
            //打乱数组
            arr.sort(function() {
                return (0.5-Math.random());
            });


            var j = 0;
            
            var para = document.querySelector('button');
            
            var demo = new CountUp("all", 0,  all_num, 0, 5);
            demo.start();

            para.addEventListener('click', getnew);

            function getnew(){
                var demo = new CountUp("bbc", 0, arr[j], 0, 1);
                demo.start();
                delete demo;
                var hhh = document.getElementById('bbc');
                //hhh.innerHTML=arr[j];
                
                if(j+1>arr.length){
                    hhh.innerHTML="End!";
                }
                j++;
                var demo = new CountUp("surplus", 0, arr.length - j, 0, 1);
                demo.start();
                delete demo;

            }
            
        </script>
    </body>
</html>